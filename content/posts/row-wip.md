+++
title = "Part 3: Row Types"
date = "2023-08-12T00:00:00Z"
author = "thunderseethe"
tags = ["Programming Languages", "Type Inference"]
series = ["Making a Language"]
keywords = ["Programming Languages", "Compiler", "Type Inference", "Bidirectional Typechecking", "Unification", "Constraint Solving", 
E-Unification", "Row Types"]
description = "Row, row, row your types"
+++

# Introduction
Define and motivate why we want row types. 
Provide background for our row implementation. (Possibly lay out steps to implement?)

  * Row types allow combining data types structurally. 
    * As opposed to more traditional solutions that are nominal
    * Abstracting Extensible Data Types (TODO: link)
  * Steps
    * New AST Nodes
    * Generate new row constraint and row types
    * Unify new row constraint to solve row types

# Refresher
Cover what we've done up till now: Ast is lambda calc + ints and Bidir + unification.

  * AST has 4 nodes: Int, Var, Func, App. It is the lambda calculus plus int literals.
  * Type checking is split into two phases constraint generation and constraint solving.
    * Constraint generation is done with a bidirectional type system
    * Constraint solving is done with unification using union-find.


# AST Modifications
New nodes that we add to our AST to support row types:

 * Label and Unlabel
 * Project and Concat
 * Inject and Branch

Examples of how traditional operations desugar into these row primitivesExamples of how traditional operations desugar into these row primitives.

# Row Types
Define row types and new row constraint. Talk about rows are different from types.

    * New thing called a row, maps fields to types
    * Row Types: Prod and Sum types 
    * New constraint: Row concat

# Row Constraint Generation
Introduce the new constraint to support row types. Cover modifications to infer and check. Purport the benefits of check for rows

# Row Constraint Generation Example
Show how row equations are generated by our new AST nodes

# Row Unification
Define row unification as equation solving. Modify unification to do row solving.

# Row unification example
Walkthrough an example unification of constraints that shows how row equation solving works.

